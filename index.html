<!DOCTYPE html> 
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GameSpotter</title>
<link rel="icon" type="image/png" href="spotlogo.png">

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* CSS kƒ±smƒ± aynen kalabilir */
   body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #800080, #ff7300);
  background-attachment: fixed;
  background-repeat: no-repeat;
  background-size: cover;
}

    .gradient-button {
      background: linear-gradient(45deg, #ff7300, #800080, #000000);
      background-size: 300% 300%;
      animation: gradientShift 6s ease infinite;
      border: none;
      box-shadow: 0 4px 15px rgba(255, 115, 0, 0.7);
      color: white;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .gradient-button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(255, 115, 0, 0.9);
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .game-card {
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      border: 2px solid transparent;
      border-radius: 0.5rem;
      background-color: #1f2937;
    }
    .game-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(255, 115, 0, 0.8);
      border-color: #ff7300;
    }
    .fade-in {
      animation: fadeInUp 0.6s ease both;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .favorite-star {
      position: absolute;
      bottom: 8px;
      right: 12px;
      font-size: 26px;
      color: #888;
      cursor: pointer;
      transition: color 0.3s ease, transform 0.2s ease;
      user-select: none;
      z-index: 10;
      filter: drop-shadow(0 0 1px #000);
    }
    .favorite-star:hover {
      color: gold;
      transform: scale(1.2);
    }
    .favorite-star.favorited {
      color: gold;
      text-shadow: 0 0 6px gold;
    }
  </style>
</head>
<body class="text-white min-h-screen p-6">
  <header class="text-center mb-10">
    <h1 class="text-5xl font-extrabold text-orange-400 drop-shadow-lg">üéÆ GameSpotter</h1>
    <p class="text-gray-300 mt-3">Find your next favorite game easily</p>
  </header>

  <!-- Favori toggle butonu -->
  <button id="favoriteToggleBtn" class="fixed top-4 left-4 z-20 bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded shadow-md transition">
    ‚≠ê Favorites
  </button>

  <section class="max-w-5xl mx-auto grid lg:grid-cols-5 sm:grid-cols-2 gap-4 mb-8">
    <div>
      <label class="block mb-1 font-medium text-orange-300">üéÆ Genre</label>
      <select id="genreSelect" class="w-full p-2 rounded bg-gray-800 text-white">
        <option value="">Any</option>
        <option value="action">Action</option>
        <option value="strategy">Strategy</option>
        <option value="simulation">Simulation</option>
        <option value="adventure">Adventure</option>
        <option value="puzzle">Puzzle</option>
        <option value="sports">Sports</option>
        <option value="racing">Racing</option>
        <option value="platformer">Platformer</option>
        <option value="indie">Indie</option>
        <option value="card">Card</option>
        <option value="casual">Casual</option>
        <option value="shooter">Shooter</option>
        <option value="fighting">Fighting</option>
      </select>
    </div>

    <div>
      <label class="block mb-1 font-medium text-orange-300">üéØ Mode</label>
      <select id="modeSelect" class="w-full p-2 rounded bg-gray-800 text-white">
        <option value="">Any</option>
        <option value="singleplayer">Singleplayer</option>
        <option value="multiplayer">Multiplayer</option>
        <option value="co-op">Co-op</option>
      </select>
    </div>

    <div>
      <label class="block mb-1 font-medium text-orange-300">üïπÔ∏è Platform</label>
      <select id="platformSelect" class="w-full p-2 rounded bg-gray-800 text-white">
        <option value="">Any</option>
        <option value="4">PC</option>
        <option value="1">Xbox One</option>
        <option value="18">PlayStation 4</option>
        <option value="7">Nintendo Switch</option>
        <option value="21">Android</option>
        <option value="3">iOS</option>
      </select>
    </div>

    <div>
      <label class="block mb-1 font-medium text-orange-300">‚è∞ Playtime</label>
      <select id="playtimeSelect" class="w-full p-2 rounded bg-gray-800 text-white">
        <option value="">Any</option>
        <option value="lt5">&lt; 5 hours</option>
        <option value="btw5and35">5 - 35 hours</option>
        <option value="gt35">&gt; 35 hours</option>
      </select>
    </div>

    <div>
      <label class="block mb-1 font-medium text-orange-300">üìÖ Release Year</label>
      <select id="yearSelect" class="w-full p-2 rounded bg-gray-800 text-white">
        <option value="">Any</option>
        <!-- Years from 2000 to 2024 -->
        <script>
          for(let y = 2024; y >= 2000; y--) {
            document.write(`<option value="${y}">${y}</option>`);
          }
        </script>
      </select>
    </div>
  </section>
<div class="text-center mb-10">
    <button id="findGameBtn" class="gradient-button px-6 py-3 rounded text-lg font-semibold">
      üîç Find Game
    </button>
  </div>
<div id="gamesContainer" class="grid grid-cols-3 gap-6">
  <div class="game-card p-4 border rounded shadow">
    <h3>Game 1</h3>
    <p>Some info about game 1</p>
  </div>
  <div class="game-card p-4 border rounded shadow">
    <h3>Game 2</h3>
    <p>Some info about game 2</p>
  </div>
  <div class="game-card p-4 border rounded shadow">
    <h3>Game 3</h3>
    <p>Some info about game 3</p>
  </div>
  <!-- Daha fazla kart... -->
</div>

<script>
  document.getElementById("randomBtn").addEventListener("click", () => {
    const cards = document.querySelectorAll(".game-card");
    const randomIndex = Math.floor(Math.random() * cards.length);

    cards.forEach((card, index) => {
      if(index === randomIndex){
        card.style.display = "block";  // Se√ßilen kart g√∂sterilir
      } else {
        card.style.display = "none";   // Diƒüer kartlar gizlenir
      }
    });
  });
</script>


  <section id="gamesContainer" class="max-w-6xl mx-auto grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></section>

  <script>
    const apiKey = "a87e18e2d31948d7bc23dda9c941d697";
    const gamesContainer = document.getElementById("gamesContainer");
    const findGameBtn = document.getElementById("findGameBtn");

    let currentPage = 1;
    let loading = false;
    let lastFilters = {};
    const FAVORITES_KEY = "favoriteGames";

    function loadFavorites() {
      const favs = localStorage.getItem(FAVORITES_KEY);
      return favs ? JSON.parse(favs) : [];
    }

    function saveFavorites(favs) {
      localStorage.setItem(FAVORITES_KEY, JSON.stringify(favs));
    }

    function toggleFavorite(gameId) {
      let favs = loadFavorites();
      if (favs.includes(gameId)) {
        favs = favs.filter(id => id !== gameId);
      } else {
        favs.push(gameId);
      }
      saveFavorites(favs);
    }

    function isFavorited(gameId) {
      const favs = loadFavorites();
      return favs.includes(gameId);
    }

   function createGameCard(game) {
  const div = document.createElement("div");
  div.className = "game-card p-4 fade-in relative bg-gray-800 text-white rounded-lg shadow-md";

  // Metacritic Radial Bar
  if (game.metacritic !== null && game.metacritic !== undefined) {
    const wrapper = document.createElement("div");
    wrapper.style.position = "absolute";
    wrapper.style.top = "8px";
    wrapper.style.right = "8px";
    wrapper.style.width = "54px";
    wrapper.style.height = "54px";
    wrapper.style.backgroundColor = "#1f2937";
    wrapper.style.borderRadius = "50%";
    wrapper.style.display = "flex";
    wrapper.style.alignItems = "center";
    wrapper.style.justifyContent = "center";
    wrapper.style.zIndex = "15";
    div.appendChild(wrapper);

    const canvas = document.createElement("canvas");
    canvas.width = 40;
    canvas.height = 40;
    wrapper.appendChild(canvas);

    const ctx = canvas.getContext("2d");
    const score = game.metacritic;
    const angle = (score / 100) * 2 * Math.PI;
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 16;
    const lineWidth = 5;

    // Renk ge√ßi≈üi
    let color = "#ff3b3b"; // kƒ±rmƒ±zƒ±
    if (score > 70) color = "#4CAF50"; // ye≈üil
    else if (score > 40) color = "#FFD700"; // sarƒ±

    // Arka daire
    ctx.beginPath();
    ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
    ctx.strokeStyle = "#444";
    ctx.lineWidth = lineWidth;
    ctx.stroke();

    // Dolan bar
    ctx.beginPath();
    ctx.arc(centerX, centerY, radius, -Math.PI / 2, -Math.PI / 2 + angle);
    ctx.strokeStyle = color;
    ctx.lineWidth = lineWidth;
    ctx.lineCap = "round";
    ctx.stroke();

    // Skor yazƒ±sƒ±
    ctx.fillStyle = "#fff";
    ctx.font = "bold 12px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(score, centerX, centerY);
  }

  // Favori yƒ±ldƒ±zƒ±
  const star = document.createElement("span");
  star.className = "favorite-star";
  star.innerHTML = "&#9733;";
  if (isFavorited(game.id)) {
    star.classList.add("favorited");
  }
  star.addEventListener("click", (e) => {
    e.stopPropagation();
    toggleFavorite(game.id);
    star.classList.toggle("favorited");
  });
  div.appendChild(star);

  // Arkaplan g√∂rseli
  const img = document.createElement("img");
  img.src = game.background_image || "https://via.placeholder.com/300x170?text=No+Image";
  img.className = "rounded mb-3 w-full h-40 object-cover";
  div.appendChild(img);

  // Oyun ba≈ülƒ±ƒüƒ±
  const title = document.createElement("h2");
  title.textContent = game.name;
  title.className = "text-xl font-bold mb-2";
  div.appendChild(title);

  // Genre bilgisi
  const genre = document.createElement("p");
  genre.innerHTML = `<span class="text-yellow-400">Genre:</span> ${game.genres.map(g => g.name).join(", ") || "N/A"}`;
  genre.className = "text-sm mb-1";
  div.appendChild(genre);

  // Oynanƒ±≈ü s√ºresi
  const playtime = document.createElement("p");
  playtime.innerHTML = `<span class="text-yellow-400">PlayTime:</span> ${game.playtime || "N/A"}h`;
  playtime.className = "text-sm mb-1";
  div.appendChild(playtime);

  // √áƒ±kƒ±≈ü yƒ±lƒ±
  const release = document.createElement("p");
  release.innerHTML = `<span class="text-yellow-400">Release Year:</span> ${game.released ? game.released.split("-")[0] : "Unknown"}`;
  release.className = "text-sm mb-1";
  div.appendChild(release);

  // Oyuncu puanƒ±
  const rating = document.createElement("p");
  rating.innerHTML = `<span class="text-yellow-400">Player Rating:</span> ${game.rating || "N/A"}`;
  rating.className = "text-sm mb-1";
  div.appendChild(rating);

  // Platform bilgisi
  const platforms = document.createElement("p");
  const platformNames = game.platforms?.map(p => p.platform.name).join(", ") || "N/A";
  platforms.innerHTML = `<span class="text-yellow-400">Platforms:</span> ${platformNames}`;
  platforms.className = "text-sm mb-1";
  div.appendChild(platforms);


  return div;
}



    function buildApiUrl(filters, page=1) {
      let url = `https://api.rawg.io/api/games?key=${apiKey}&page=${page}&page_size=12`;

      if (filters.genre) url += `&genres=${filters.genre}`;
      if (filters.mode) url += `&tags=${filters.mode}`;
      if (filters.platform) url += `&platforms=${filters.platform}`;
      if (filters.year) url += `&dates=${filters.year}-01-01,${filters.year}-12-31`;
      if (filters.playtime) {
        if (filters.playtime === "lt5") url += `&playtime_lte=5`;
        else if (filters.playtime === "btw5and35") url += `&playtime_gte=5&playtime_lte=35`;
        else if (filters.playtime === "gt35") url += `&playtime_gte=35`;
      }
      return url;
    }

    async function loadAndDisplayGames(clear=true) {
      if (loading) return;
      loading = true;

      if (clear) {
        gamesContainer.innerHTML = "";
        currentPage = 1;
      }

      const url = buildApiUrl(lastFilters, currentPage);
      try {
        const response = await fetch(url);
        const data = await response.json();

        if (data.results && data.results.length > 0) {
          data.results.forEach(game => {
            gamesContainer.appendChild(createGameCard(game));
          });
          currentPage++;
        } else if (clear) {
          gamesContainer.innerHTML = "<p class='text-center text-gray-300 col-span-full'>Can't find any game.</p>";
        }
      } catch {
        if (clear) {
          gamesContainer.innerHTML = "<p class='text-center text-gray-300 col-span-full'>API hatasƒ± veya baƒülantƒ± sorunu.</p>";
        }
      } finally {
        loading = false;
      }
    }

    findGameBtn.addEventListener("click", () => {
      lastFilters = {
        genre: document.getElementById("genreSelect").value,
        mode: document.getElementById("modeSelect").value,
        platform: document.getElementById("platformSelect").value,
        playtime: document.getElementById("playtimeSelect").value,
        year: document.getElementById("yearSelect").value,
      };
      loadAndDisplayGames(true);
    });

    // Sayfa a≈üaƒüƒ± kaydƒ±rƒ±ldƒ±ƒüƒ±nda yeni oyunlarƒ± y√ºkle (infinite scroll)
    window.addEventListener("scroll", () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
        loadAndDisplayGames(false);
      }
    });

    // Sayfa a√ßƒ±ldƒ±ƒüƒ±nda varsayƒ±lan y√ºkleme
    loadAndDisplayGames(true);

    // -------------------
    // Favori butonu ve favorilere g√∂re filtreleme eklendi
    // -------------------

    const favoriteToggleBtn = document.getElementById("favoriteToggleBtn");
    let showingFavorites = false;

    favoriteToggleBtn.addEventListener("click", () => {
      showingFavorites = !showingFavorites;

      if (showingFavorites) {
        favoriteToggleBtn.textContent = "üè† Ana Sayfa";
        const favs = loadFavorites();
        gamesContainer.innerHTML = "";

        if (favs.length === 0) {
          gamesContainer.innerHTML = "<p class='text-center text-gray-300 col-span-full'>You didn't favorite any game yet.</p>";
          return;
        }

        // Favori oyunlarƒ± teker teker √ßek ve g√∂ster
        Promise.all(favs.map(id => fetch(`https://api.rawg.io/api/games/${id}?key=${apiKey}`).then(res => res.json())))
          .then(games => {
            games.forEach(game => gamesContainer.appendChild(createGameCard(game)));
          })
          .catch(() => {
            gamesContainer.innerHTML = "<p class='text-center text-gray-300 col-span-full'>An error occured while loading favorite games.</p>";
          });

      } else {
        favoriteToggleBtn.textContent = "‚≠ê Favorites";
        loadAndDisplayGames(true);
      }
    });

  </script>

  <div id="powered-by" class="fixed top-2 right-4 text-xs text-gray-400 font-light z-50">
  Powered by RedPixel Games
</div>

</body>
</html>
